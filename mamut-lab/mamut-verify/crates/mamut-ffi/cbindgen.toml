# cbindgen configuration for mamut-ffi
#
# This file configures cbindgen to generate C headers from Rust FFI code.
# Run with: cbindgen --config cbindgen.toml --crate mamut-ffi --output include/verifier_generated.h
#
# Note: The manual verifier.h header is the source of truth. This configuration
# is provided for validation and to generate headers for new types automatically.

[defines]
# Define feature flags for conditional compilation
"feature = fault_injection" = "MAMUT_FAULT_INJECTION"

[export]
# Items to include in the generated header
include = [
    "VerifierHandle",
    "TestHandle",
    "CheckResultHandle",
    "ReportHandle",
    "StringSlice",
    "ByteSlice",
    "VerifierErrorCode",
    "VerifierError",
    "VerifierResultTag",
    "VerifierResult",
    "ExecutionMode",
    "TestConfig",
    "OperationType",
    "Operation",
    "OperationStatus",
    "OperationResult",
    "FaultType",
    "FaultTarget",
    "FaultConfig",
    "FaultInfo",
]

# Items to exclude from the generated header
exclude = [
    "SafeHandle",
    "VerifierInner",
    "TestInner",
    "CheckResultInner",
    "ReportInner",
]

# Prefix for exported symbols
prefix = ""

# Rename rules for types
[export.rename]
# No renames needed currently

[layout]
# Use C-compatible enum sizes
packed = "MAMUT_PACKED"

[fn]
# Function export settings
rename_args = "None"
args = "Horizontal"
sort_by = "None"

# Prefix for function names (empty = no prefix)
prefix = ""

# Postfix for function names (empty = no postfix)
postfix = ""

[struct]
# Rename struct fields to use snake_case
rename_fields = "None"

# Generate derive annotations
derive = []
derive_constructor = false
derive_eq = false
derive_neq = false
derive_lt = false
derive_lte = false
derive_gt = false
derive_gte = false
derive_ostream = false

# Associated constants handling
associated_constants_in_body = false

[enum]
# Rename enum variants
rename_variants = "ScreamingSnakeCase"

# Use C-style enums
prefix_with_name = true

# Derive for enums
derive = []
derive_helper_methods = false
derive_const_casts = false
derive_mut_casts = false
cast_assert_name = "assert"

# Enum discrimination
enum_class = false
private_default_tagged_enum_constructor = false

[const]
# Allow constexpr for constants
allow_constexpr = false
allow_static_const = true

[macro_expansion]
# Macros to expand
bitflags = false

[parse]
# Parsing settings
parse_deps = false
include = []
exclude = []
extra_bindings = []
clean = false

[parse.expand]
# Features to enable for parsing
crates = []
all_features = false
default_features = true
features = []

[documentation]
# Documentation style
style = "Doxy"
length = "Full"

[header]
# Header guard and includes
include_guard = "MAMUT_VERIFIER_GENERATED_H"
autogen_warning = "/* Warning: This file is auto-generated by cbindgen. Do not modify manually. */"
include_version = true
documentation = true
no_includes = false

# Extra includes for the generated header
includes = ["stdint.h", "stddef.h", "stdbool.h"]
sys_includes = []

[trailer]
# No trailer needed

# C++ specific settings (for reference if needed)
[cxx]
enabled = false

# Language output
language = "C"

# Line length for wrapping
line_length = 100

# Tab width
tab_width = 4

# Style settings
style = "Both"

# Braces style
braces = "SameLine"

# Line endings
line_endings = "LF"

# Pointer style
after_includes = ""

# Usize handling - use size_t
usize_is_size_t = true

# Negation handling for option types
[ptr]
non_null_attribute = ""
